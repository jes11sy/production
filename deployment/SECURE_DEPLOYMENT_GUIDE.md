# üîí –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ë–ï–ó–û–ü–ê–°–ù–û–ú–£ DEPLOYMENT

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
1. **–£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª "–¥–∞–Ω–Ω—ã–µ –¥–ª—è env.txt"** —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥ –ø–∞—Ä–æ–ª–∏** –≤–æ –≤—Å–µ—Ö docker-compose —Ñ–∞–π–ª–∞—Ö
3. **–ó–∞–º–µ–Ω–µ–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç—ã** –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞** —Å —Ö–∞—Ä–¥–∫–æ–¥ –ø–∞—Ä–æ–ª—è–º–∏
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ Grafana –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –±–µ–∑ —Å–ª–∞–±—ã—Ö –ø–∞—Ä–æ–ª–µ–π

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û DEPLOYMENT

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω
cp backend/config/env.production.secure .env

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏
openssl rand -hex 32  # –¥–ª—è SECRET_KEY
openssl rand -hex 32  # –¥–ª—è JWT_SECRET_KEY
openssl rand -hex 32  # –¥–ª—è CSRF_SECRET_KEY
```

### 2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Ñ–∞–π–ª —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```env
# === –ë–ê–ó–ê –î–ê–ù–ù–´–• ===
DATABASE_URL=postgresql://gen_user:–í–ê–®–ê_–ë–ê–ó–ê_–ü–ê–†–û–õ–¨@—Ö–æ—Å—Ç:5432/–±–∞–∑–∞
POSTGRESQL_HOST=–≤–∞—à_—Ö–æ—Å—Ç
POSTGRESQL_USER=–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
POSTGRESQL_PASSWORD=–≤–∞—à_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
POSTGRESQL_DBNAME=–≤–∞—à–∞_–±–∞–∑–∞
POSTGRESQL_PORT=5432

# === –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ ===
SECRET_KEY=–≤–∞—à_32_—Å–∏–º–≤–æ–ª—å–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
JWT_SECRET_KEY=–≤–∞—à_jwt_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
CSRF_SECRET_KEY=–≤–∞—à_csrf_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á

# === FRONTEND ===
BACKEND_CORS_ORIGINS=["https://–≤–∞—à-–¥–æ–º–µ–Ω.ru","https://www.–≤–∞—à-–¥–æ–º–µ–Ω.ru"]

# === EMAIL ===
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=–≤–∞—à_email@gmail.com
SMTP_PASSWORD=–≤–∞—à_app_–ø–∞—Ä–æ–ª—å

# === TELEGRAM ===
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id

# === –ú–û–ù–ò–¢–û–†–ò–ù–ì ===
GRAFANA_ADMIN_PASSWORD=–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å_graf–∞–Ω–∞

# === –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–† ===
ADMIN_PASSWORD=–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–∞–¥–º–∏–Ω–∞
```

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤ production:

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env –≤ .gitignore
echo ".env" >> .gitignore

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose -f deployment/docker-compose.production.yml --env-file .env up -d

# –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
export DATABASE_URL="–≤–∞—à–∞_database_url"
export ADMIN_PASSWORD="–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å"
python create_user_production.py
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env –ù–ï –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
git status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å
docker-compose -f deployment/docker-compose.production.yml ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl -X POST https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"login": "admin", "password": "–≤–∞—à_–∞–¥–º–∏–Ω_–ø–∞—Ä–æ–ª—å"}'
```

## üîê –ö–û–ù–¢–†–û–õ–¨–ù–´–ô –°–ü–ò–°–û–ö –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- [x] –£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
- [x] –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥ –ø–∞—Ä–æ–ª–∏ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã docker-compose —Ñ–∞–π–ª—ã
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è Grafana –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- [ ] –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å .env –≤ .gitignore
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –ø—Ä–∞–≤–∏–ª–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üö® –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–ù–ï –ö–û–ú–ú–ò–¢–¨–¢–ï .env —Ñ–∞–π–ª—ã** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –≤ production
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –∞–ª–µ—Ä—Ç—ã
5. **–î–µ–ª–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ backup** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üìû –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env —Ñ–∞–π–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ 